{% extends "base.html" %}

{% block head %}
{{ super() }}
<link rel="stylesheet" href="static/css/v1.css">
{% endblock %}

{% block page_content %}
<h5 align="center">Roulette is the fastest way to make moeny </h5>
<table class='simple_table roul_table'><tr>
    <td style='background:#005c11' onClick="putbet(this)" alt="" title="Straight up 00" >00</td>
    <td style='background:#cc3322' onClick="putbet(this)" alt="" title="Straight up 3" >3</td>
    <td style='background:#000'onClick="putbet(this)" alt="" title="Straight up 6" >6</td>
    <td style='background:#cc3322'onClick="putbet(this)" alt="" title="Straight up 9" >9</td>
    <td style='background:#cc3322' onClick="putbet(this)" alt="" title="Straight up 12">12</td>
    <td style='background:#000' onClick="putbet(this)" alt="" title="Straight up 15">15</td>
    <td style='background:#cc3322' onClick="putbet(this)" alt="" title="Straight up 18">18</td>
    <td style='background:#cc3322' onClick="putbet(this)" alt="" title="Straight up 21" >21</td>
    <td style='background:#000' onClick="putbet(this)" alt="" title="Straight up 24">24</td>
    <td style='background:#cc3322' onClick="putbet(this)" alt="" title="Straight up 27">27</td>
    <td style='background:#cc3322' onClick="putbet(this)" alt="" title="Straight up 30">30</td>
    <td style='background:#000' onClick="putbet(this)" alt="" title="Straight up 33">33</td>
    <td style='background:#cc3322' onClick="putbet(this)" alt="" title="Straight up 36">36</td>
    <td style='width:90px; background:#005c11'onClick="putbet(this)" alt="" title="3rd column" >3rd column</td></tr>
    <tr><td style='background:#005c11' onClick="putbet(this)" alt="" title="Straight up 0" >0</td>
    <td style='background:#000' onClick="putbet(this)" alt="" title="Straight up 2" >2</td>
    <td style='background:#cc3322' onClick="putbet(this)" alt="" title="Straight up 5">5</td>
    <td style='background:#000' onClick="putbet(this)" alt="" title="Straight up 8">8</td>
    <td style='background:#000' onClick="putbet(this)" alt="" title="Straight up 11">11</td>
    <td style='background:#cc3322' onClick="putbet(this)" alt="" title="Straight up 14">14</td>
    <td style='background:#000' onClick="putbet(this)" alt="" title="Straight up 17">17</td>
    <td style='background:#000' onClick="putbet(this)" alt="" title="Straight up 20">20</td>
    <td style='background:#cc3322' onClick="putbet(this)" alt="" title="Straight up 23">23</td>
    <td style='background:#000' onClick="putbet(this)" alt="" title="Straight up 26">26</td>
    <td style='background:#000' onClick="putbet(this)" alt="" title="Straight up 29">29</td>
    <td style='background:#cc3322' onClick="putbet(this)" alt="" title="Straight up 32">32</td>
    <td style='background:#000' onClick="putbet(this)" alt="" title="Straight up 35">35</td>
    <td style='width:90px; background:#005c11' onClick="putbet(this)" alt="" title="2nd column">2nd column</td></tr>
    <tr><td style='border:0'></td>
    <td style='background:#cc3322'onClick="putbet(this)" alt="" title="Straight up 1" >1</td>
    <td style='background:#000'onClick="putbet(this)" alt="" title="Straight up 4" >4</td>
    <td style='background:#cc3322' onClick="putbet(this)" alt="" title="Straight up 7">7</td>
    <td style='background:#000' onClick="putbet(this)" alt="" title="Straight up 10">10</td>
    <td style='background:#000'onClick="putbet(this)" alt="" title="Straight up 13" >13</td>
    <td style='background:#cc3322' onClick="putbet(this)" alt="" title="Straight up 16">16</td>
    <td style='background:#cc3322' onClick="putbet(this)" alt="" title="Straight up 19">19</td>
    <td style='background:#000' onClick="putbet(this)" alt="" title="Straight up 22">22</td>
    <td style='background:#cc3322' onClick="putbet(this)" alt="" title="Straight up 25">25</td>
    <td style='background:#000' onClick="putbet(this)" alt="" title="Straight up 28">28</td>
    <td style='background:#000' onClick="putbet(this)" alt="" title="Straight up 31">31</td>
    <td style='background:#cc3322' onClick="putbet(this)" alt="" title="Straight up 34">34</td>
    <td style='width:90px; background:#005c11' onClick="putbet(this)" alt="" title="1st column">1st column</td></tr>
    <tr><td style='border:0'></td>
    <td colspan='4' style='background:#005c11' onClick="putbet(this)" alt="" title="1st dozen">1st dozen</td>
    <td colspan='4' style='background:#005c11' onClick="putbet(this)" alt="" title="2nd dozen">2nd dozen</td>
    <td colspan='4' style='background:#005c11' onClick="putbet(this)" alt="" title="3rd dozen">3rd dozen</td>
    <td style='border:0'></td></tr>
    <tr><td style='border:0'></td>
    <td colspan='2' style='background:#005c11' onClick="putbet(this)" alt="" title="1 to 18">1 to 18</td>
    <td colspan='2' style='background:#005c11' onClick="putbet(this)" alt="" title="EVEN">EVEN</td>
    <td colspan='2' style='background:#cc3322' onClick="putbet(this)" alt="" title="RED">RED</td>
    <td colspan='2' style='background:#000' onClick="putbet(this)" alt="" title="BLACK" >BLACK</td>
    <td colspan='2' style='background:#005c11' onClick="putbet(this)" alt="" title="ODD">ODD</td>
    <td colspan='2' style='background:#005c11' onClick="putbet(this)" alt="" title="19 to 36">19 to 36</td>
    <td style='border:0'></td></tr></table>


<p>Choose a jeton to bet</p>
<form>

    {{ rulform.jetons }}
</form>
<input type="button" id="button3" value="Clear Bets" onclick="clear_bets();"></input>
<div id="Bets"></div>


<span id=result></span>
<p>Your ballance :<span id=result2></span></p>
<input type="button" id=spinr value="Spin the roulette"></input>


{% endblock %}

{% block scripts %}
{{ super() }}

<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type=text/javascript>
  $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
</script>
<script>

var x = 0;
var  myJSON, text, obj,z;
var myObj=[];

function putbet(obj) {
  if (obj.title=="") return;

 var bet_on = obj.title;

 var amount=document.querySelector('input[name="jetons"]:checked').value;

 myObj.push({bet_on:bet_on,amount:amount});

 myJSON = JSON.stringify(myObj);
 localStorage.setItem("testJSON", myJSON);
 display_bets()
 }

function display_bets()
{
  text = localStorage.getItem("testJSON");

obj = JSON.parse(text);
var l = Object.keys(obj).length;

  var e = "<hr/>";
  for (var g=0;g<l;g++){
    var stil= document.querySelector("td[title = \'"+obj[g].bet_on+"\']").style.backgroundColor;

     e += "<tr> <td> Placed a bet on  "  +" <span style='background:"+stil+"; color:white;border:2px solid #cccc00';>" + obj[g].bet_on +"</span>"+" using a jeton of "+"<strong>" +obj[g].amount +"</strong>" +" $"+ "</td></tr><br/>";
  }
   document.getElementById("Bets").innerHTML = e;
}

function clear_bets()
{
var e = "<hr/>";
document.getElementById("Bets").innerHTML = e;
myJSON={};
myObj=[];
text='';
}

$(function() {
    $('input#spinr').off().on('click', function() {
        if($.isEmptyObject(text)){
   alert("You need to place some bets.");
}else{
      $.getJSON('/spin', {
        a: text,

      }, function(data) {
        $("#result").text(data.result);
        var z="<hr/>";
        var still= document.querySelector("td[title = \'Straight up "+data.result+"\']").style.backgroundColor;

     z += "<tr> <td> Ball landed on  "  +" <span style='background:"+still+"; color:white;border:2px solid #cccc00';>" + data.result+"</span> </td><td> Amount bet <strong>"+data.amount_bet+"</strong></td><td> Amount won <strong>"+data.amount_won +"</strong></td><td> Amount adjusted <strong>"+(data.amount_won - data.amount_bet) +"</strong></td></tr><br/>";
        document.getElementById("result").innerHTML = z;

        $("#result2").text(data.new_cash);

        text='';
        myJSON={};
        myObj=[];

      });
      return false;

};
    });
  });
</script>
{% endblock %}